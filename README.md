# Описание проекта

Проект создан для взаимодействия с API wildberries для орагинзаций, работающих по FBS. Реализоваы следующие функции, взаимодействие осуществляется через telegram-бота:
1. Получение статистики (количество новых заказов, количество новых заказов без адреса, количество заказов на сборке)
2. Перевод заказов на сборку
   1. По артикулу
   2. По количеству (от старых к новым)
3. Создание и закрытие поставки, а также получение штрихкода поставки (как текущей, так и по номеру)
4. Добавление заказов к текущей поставке
5. Получение стикеров для заказов на сборке
6. Добавление нового аккаунта для работы (в случае, если оказываются услуги фулфилмента для различных клиентов)
7. Добавление новых аккаунтов

Таким образом, имея апи-ключ можно полностью реализовать работу через бота (Открытие поставки -> перевод на сборку заказов -> получение стикеров -> закрытие поставки)

Также после каждого получения стикеров бот формируется и высылается excel-таблица с  информацией о заказах. Она  может быть использована в том числе для проверки комплектации отгрузки при наличии терминала сбора данных.

## Инструкция по запуску

Для запуска проекта нужно:
1. Скопировать проект с репозитория
```
git clone https://github.com/AsmodaiP/getting_barcodes
```
2. Установить нужные зависимости в виртуальное окружение
```
python3 -m venv venv
source vevn/bin/activate
pip install -r requirements.txt
```
1. Создать файл .env с данными вида.
```
TOKEN=апи_токен_вашего_основного_аккаунта
TELEGRAM_TOKEN=токен_вашего_телеграм_бота
ID_FOR_NOTIFICATION=айди_аккаунта_на_который_будут_приходить_уведомления
```

4. Запустить бота
```
python3 bot.py
```

## Постоянная работа
Для постоянной работы нужно выполнить
```
sudo nano
lib/systemd/system/bot.service
```
И заполнить его следующим образом
```           
[Unit]
Description=bot for rocket
After=network.target

[Service]
User=root
EnviromentFile=/etc/environment
ExecStart=путь_до_виртуального_окружения/bin/python bot.py 
ExecReload=путь_до_виртуального_окружения/bin/python bot.py 
WorkingDirectory=путь_до_проекта
KillMode=process
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target

```

После чего нужно выполнить
```
sudo  systemctl enable bot
sudo systemctl daemon-reload
```